## Testauksesta ##

Sekä DatabaseSetup- että MealTweaker luokkaa on testattu eniten kaikista, vaikka niille ei testejä juuri olekaan. Luokkien testaaminen on vaikeaa, vähän eri syistä. 

MealTweaker käyttää osin satunnaisia arvoja, joten haluttujen tulosten saaminen on vaikeaa. Mahdollista se toki olisi, mutta vaatisi todella tarkkaa laskemista annetuista raaka-aineista ja määristä, ja sekään ei takaisi kovinkaan kummoista testauskattavuutta. Luokkaa onkin testattu todella paljon graafisen käyttöliittymän kautta kokeilemalla eri raaka-aineita ja makrojen määriä sekä ajamalla CalculataMealin testilooppia 10 000 kierrosta kerralla satunnaisilla arvoilla (pienensin loopin kokoa PIT-testejä varten, ettei aika olisi mennyt ihan kohtuuttomaksi). Täydellinen se ei vielä ole (tuskin tulee koskaan olemaankaan, koska tuon tyyppisessä pyörityksessä on aina viilaamisen tarvetta), mutta toimii kuitenkin ja antaa järkeviä arvoja ulos.

DatabaseSetup luo tietokannan tarvittaessa, sekä lisää sinne taulut ja lisää tauluihin sisällön CSV-tiedostoista. Luokkaa testattiin sitä tehdessä pitkään ja hartaasti, kunnes se lopulta saatiin toimimaan halutulla tavalla. Taulujen täyttäminen makroilla tiedostosta jossa on ~260000 riviä ottaa hetken, joten en edes viitsinyt lähteä kokeilemaan mitä PIT:n mutantit tekevät sille ja koneelleni. Testaamisen teki myös hankalaksi se, etten löytänyt järkevää tapaa tyhjentää tietokantaa testatessa ja myös järkevien tapojen testaaminen kaikkien taulujen luomiseen oli vähän hankalahkoa. Tietokanta luodaan aina, jos sitä ei löydetä, ja manuaalisesti db-kansion poistamalla olen testannut tietokannan luontia kymmeniä kertoja, ja se toimii siinä tapauksessa halutun mukaisesti, eli ohjelma käynnistyy toivotusti ja kaikki arvot tiedostoista on ladattu tietokantaan. ~~Valitettavasti PIT:n ajaminen rikkoo tietokannan ja ainakin tätä kirjoittaessa kansion pitää PIT-testin jälkeen poistaa ja tietokanta alustaa. Ilmeisesti jotkut tietokantaa testaavat testit mutatoituvat niin pahasti että rikkovat jotain tietokannassa.~~
